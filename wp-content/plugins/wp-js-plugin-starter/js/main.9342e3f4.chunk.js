(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),o=a(7),c=a.n(o),s=(a(15),a(2)),l=a(4),d=a(3),u=a(1),m=a(5),p=(a(16),a(8)),b=[{type:"image-annotation",dataset:"hexhexhex",body:(n="car",i.a.createElement("div",{className:"instructions"},"Select all squares with",i.a.createElement("h1",{className:"instruction-highlight"},n),"or parts of ",n,"s."))}],h=(a(17),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).render=function(){var e;return console.log("Height",window.innerHeight),console.log("Width",window.innerWidth),console.log("gridbox w"),"image-annotation"===a.state.type?e=a.generateSingleImageGrid(a.state.data[0]):"image-categorization"===a.state.type&&(e=a.generateMultipleImageGrid(a.state.data)),i.a.createElement(i.a.Fragment,null,e,i.a.createElement("div",{className:"bottom-action-panel"},i.a.createElement("button",{className:"btn-unlock"},"Unlock")))},a.generateSingleImageGrid=function(e){return console.log(a.state),i.a.createElement("div",{className:"image-grid",style:{backgroundImage:"url('".concat(e,"')")}},a.state.selection.map(function(e,t){return i.a.createElement("div",{className:"grid-box ".concat(!0===e?"selected":"pristine"),key:t,onClick:function(e){return a.selectGridBox(e,t)}},i.a.createElement("div",{className:"grid-display"}))}))},a.selectGridBox=function(e,t){e.preventDefault();var n=a.state.selection.map(function(e,a){return a===t?!e:e});a.setState({selection:n})},a.state={data:e.data,type:e.type,selection:Array(e.gridSize).fill(!1)},a.selectGridBox=a.selectGridBox.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),t}(i.a.Component)),f=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).captureMetadata=function(){var e={height:window.innerHeight,width:window.innerWidth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth,latency:navigator.connection.downlink,browser:{name:navigator.appName,version:navigator.appCodeName,agent:navigator.userAgent,platform:navigator.platform}};a.setState({metadata:e,metadataCaptured:!0}),a.fetchTaskBlueprint(e)},a.fetchTaskBlueprint=function(e){console.log(e);var t=Object(u.a)(a);fetch("".concat(a.state.url,"/").concat(a.state.vendorId,"/data"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ifj129fah8xx8102579173"},body:JSON.stringify({deviceMetadata:e})}).then(function(e){return e.json()}).then(function(e){""===e.sessionId?console.log("ERROR: Invalid task blueprint"):t.setState({sessionId:e.sessionId,taskBlueprint:e,taskBlueprintLoaded:!0})})},a.sendUserResponse=function(e){a.setState({taskCompletedByUser:!0,userResponse:e});var t=Object(u.a)(a);fetch("".concat(a.state.url,"/{vendor_id}/data/response"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"bearer ifj129fah8xx8102"},body:JSON.stringify(t.state.userResponse)}).then(function(e){return e.json()}).then(function(e){""===e.sessionId?console.log("ERROR: Invalid response validation token"):t.setState({sessionId:e.sessionId,taskBlueprint:e,taskBlueprintLoaded:!0})})},a.render=function(){return i.a.createElement("div",{className:"turkbox-engine"},i.a.createElement("div",{className:"upper-paneloids"},i.a.createElement("div",{className:"navigation"},"Unlock Article"),i.a.createElement("div",{className:"instruction"},b.find(function(e,t){return"image-annotation"===e.type&&"hexhexhex"===e.dataset}).body)),i.a.createElement("div",{className:"lower-paneloids"},i.a.createElement(h,{type:"image-annotation",data:["https://www.turkbox.io/cdn/data/5d143afae7179a4e432a7719/bb2c3ff8-a1444b2b.jpg"],gridSize:9})))},a.state={metadataCaptured:!1,metadata:{},taskBlueprintLoaded:!1,taskBlueprint:{},taskCompletedByUser:!1,userResponse:{},userResponseValidated:!1,validationToken:{},sessionId:"",url:"http://localhost:8000/api/v2",vendorId:"5ba8572a420eb80e96679173"},a.captureMetadata=a.captureMetadata.bind(Object(u.a)(a)),a.fetchTaskBlueprint=a.fetchTaskBlueprint.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.captureMetadata()}}]),t}(i.a.Component),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).render=function(){var e;return"static-banner"===a.state.activeComponent?e=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"banner-header"},i.a.createElement("div",{className:"kl-banner-content-wrapper"},i.a.createElement("div",{className:"row sign-in-row"},"Already a subscriber? ",i.a.createElement("a",{href:"@sjain: LINK_TO_WP_SIGN_IN"},"Sign in")))),i.a.createElement("div",{className:"banner-container"},i.a.createElement("div",{className:"kl-banner-content-wrapper"},i.a.createElement("h1",{className:"main-banner-text"},"Thank you for reading Khabar Lahariya"),i.a.createElement("p",{className:"banner-introduction"},"This article requires a subscription. Support our unique newsroom comprised of incredible women who have travelled great distances to tell unheard stories from remote, rural areas in India."),i.a.createElement("div",{className:"subscription-options"},i.a.createElement(v,{heading:"Buy a subscription",value:"\u20b9200/mo",offerDetails:"Unlimited access to premium articles, exclusive content, discount on merchandise",buttonAction:function(e){return a.bannerRedirect(e,"/wp-login.php")}}),i.a.createElement(v,{heading:"Unlock access to 1 article",value:"Free",offerDetails:"Access this article by completing a simple 10-second image puzzle",buttonAction:function(e){return a.loadTurkboxEngine(e)}}))))):"turkbox"===a.state.activeComponent&&(e=i.a.createElement("div",{className:"kl-banner-content-wrapper"},i.a.createElement(f,null))),i.a.createElement("div",{className:"kl-paid-banner ".concat(a.state.expanded?"expanded":"")},e)},a.bannerRedirect=function(e,t){e.preventDefault(),window.location.assign(t)},a.loadTurkboxEngine=function(e){e.preventDefault(),a.setState({expanded:!0,activeComponent:"turkbox"})},a.state={expanded:!1,activeComponent:"static-banner"},a.bannerRedirect=a.bannerRedirect.bind(Object(u.a)(a)),a.loadTurkboxEngine=a.loadTurkboxEngine.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),t}(i.a.Component),v=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).render=function(){return i.a.createElement("div",{className:"row card-holder-row"},i.a.createElement("div",{className:"card kl-option-card"},i.a.createElement("div",{className:"card-row"},i.a.createElement("div",{className:"card-col"},i.a.createElement("h1",null,a.props.heading)),i.a.createElement("div",{className:"card-col"},i.a.createElement("h2",null,a.props.value))),i.a.createElement("div",{className:"card-row"},i.a.createElement("div",{className:"card-col full"},i.a.createElement("p",{className:"pc70 full-on-mobile"},"                     ",a.props.offerDetails))),i.a.createElement("hr",{className:"spacer"}),i.a.createElement("div",{className:"card-row"},i.a.createElement("div",{className:"card-col full right-align"},i.a.createElement("button",{onClick:function(e){a.props.buttonAction(e)}},"Continue")))))},a}return Object(m.a)(t,e),t}(i.a.Component);c.a.render(i.a.createElement(g,null),document.getElementById("turkbox-banner-slot"))},9:function(e,t,a){e.exports=a(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.9342e3f4.chunk.js.map